{
  "name": "Variable System for Routine Executor",
  "description": "Enable nodes to access variables from upstream node outputs and routine-level globals",
  "phases": {
    "1": { "name": "Core Expression System", "status": "complete" },
    "2": { "name": "Routine Variables", "status": "complete" },
    "3": { "name": "Validation & Tooling", "status": "complete" },
    "4": { "name": "UI Enhancements", "status": "in-progress" },
    "5": { "name": "Advanced Features", "status": "todo" }
  },
  "tasks": [
    {
      "feature": "Implement ExpressionResolver class",
      "status": "done",
      "phase": 1
    },
    {
      "feature": "Add expression parsing with regex",
      "status": "done",
      "phase": 1
    },
    {
      "feature": "Support dot notation path resolution",
      "status": "done",
      "phase": 1
    },
    {
      "feature": "Integrate expression resolver into node execution flow",
      "status": "done",
      "phase": 1
    },
    {
      "feature": "Add unit tests for expression resolver",
      "status": "done",
      "phase": 1
    },
    {
      "feature": "Add integration tests for workflow expression resolution",
      "status": "done",
      "phase": 1
    },
    {
      "feature": "Update Convex schema with variables field on routines",
      "status": "done",
      "phase": 2
    },
    {
      "feature": "Add CRUD mutations for routine variables",
      "status": "done",
      "phase": 2
    },
    {
      "feature": "Update routine editor UI to manage variables",
      "status": "done",
      "phase": 2
    },
    {
      "feature": "Pass routine variables to execution engine",
      "status": "done",
      "phase": 2
    },
    {
      "feature": "Add expression syntax documentation to plugin configs",
      "status": "done",
      "phase": 2
    },
    {
      "feature": "Validate expressions at routine save time",
      "status": "done",
      "phase": 3
    },
    {
      "feature": "Check for undefined variable references",
      "status": "done",
      "phase": 3
    },
    {
      "feature": "Verify upstream node references are valid",
      "status": "done",
      "phase": 3
    },
    {
      "feature": "Display validation errors in UI",
      "status": "done",
      "phase": 3
    },
    {
      "feature": "Build variable management panel component",
      "status": "done",
      "phase": 4
    },
    {
      "feature": "Build ExpressionInput component with CodeMirror 6",
      "status": "done",
      "phase": 4,
      "notes": "Includes single/multi-line modes, 11 unit tests"
    },
    {
      "feature": "Add syntax highlighting for expressions",
      "status": "done",
      "phase": 4,
      "notes": "StreamLanguage tokenizer with shadcn/ui theme"
    },
    {
      "feature": "Build autocomplete completion source",
      "status": "done",
      "phase": 4,
      "notes": "Triggers on {{ pattern, groups by category"
    },
    {
      "feature": "Create ExpressionContextProvider",
      "status": "done",
      "phase": 4,
      "notes": "BFS upstream node detection, useExpressionContext hook"
    },
    {
      "feature": "Add live preview with debounced resolution",
      "status": "done",
      "phase": 4,
      "notes": "300ms debounce, type badges, 28 unit tests"
    },
    {
      "feature": "Pass context through NodeConfigDrawer",
      "status": "todo",
      "phase": 4
    },
    {
      "feature": "Create ExpressionField wrapper component",
      "status": "todo",
      "phase": 4
    },
    {
      "feature": "Migrate plugin config UIs to use ExpressionField",
      "status": "todo",
      "phase": 4,
      "notes": "HTTP Request, Static Data, OpenAI Chat plugins"
    },
    {
      "feature": "Add Storybook stories for ExpressionInput",
      "status": "todo",
      "phase": 4
    },
    {
      "feature": "Support array indexing in paths",
      "status": "done",
      "phase": 5
    },
    {
      "feature": "Add filter functions (json, uppercase, length)",
      "status": "todo",
      "phase": 5
    },
    {
      "feature": "Support default values syntax",
      "status": "todo",
      "phase": 5
    }
  ]
}
